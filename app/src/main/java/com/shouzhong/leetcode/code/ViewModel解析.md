# ViewModel

这个设计的初衷是因为在低内存或者某些定制系统的手机上，经常出现杀后台的情况，具体情况是应用退到后台，一段时间后重新打开，
发现页面竟然重新加载了，google最初给的解决方法是onSaveInstanceState，但是这个在页面数据和状态少的情况下还好，当多了
的时候对开发者来说就是一种折磨，ViewModel就是为了解决这个痛点而诞生的。

首先从使用开始说，ViewModelProvider().get()方式获取ViewModel，这个ViewModel是我们继承ViewModel的类，那么是如何存
ViewModel的呢，内部用了ViewModelStore来存，就是一个ViewModelStoreOwner拥有一个ViewModelStore，ViewModelStore
里面用map可以存多个ViewModel，ViewModelProvider有一个参数传的是ViewModelStoreOwner，里面其实是获取ViewModelStore，
然后get方法其实是调用ViewModelStore.get方法。上面的这些其实没什么东西，最重要的是如何在activity或fragment被回收的
情况下ViewModel或者说ViewModelStore不被回收，这里用了onRetainNonConfigurationInstance和getLastNonConfigurationInstance，
你可能不知道是用来干嘛的，其实和onSaveInstanceState差不多功能，到这里差不多结束了。一个很牛逼的功能，实现起来可能很简单。